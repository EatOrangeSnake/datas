<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
    <title>橘子团队研究的计算机数据类型的方向——自然数类型</title>
    <style>
        body {
            margin: 0px;
            background-color: lightgoldenrodyellow;
            font-size: 2.5em;
            font-weight: bolder;
            user-select: none;
        }
        p {
            text-indent: 2em;
        }
        var {
            background-color: #00000080;
            border-radius: 0.25em;
        }
    </style>
</head>
<body>
    <h1>橘子团队研究的计算机数据类型的方向——自然数类型</h1>
    <h2>这篇文章的主要内容是什么？</h2>
    <p>
        这篇文章主要介绍了橘子团队研究的计算机数据类型的方向——自然数类型。
        在数学中，自然数是一个大部分小学生都能理解的概念。
        要读懂这篇文章最好知道这个概念，不知道的可以去学习，
        我们这篇文章的主要内容是在计算机上实现自然数类型。
    </p>
    <h2>为什么要在计算机上实现自然数类型？</h2>
    <p>
        数学中自然数有多重要，在计算机上实现自然数就有多重要。
        数学中有很多自然数的应用，是人类一开始最先接触的数学概念。
        自然数在数学中可以描述数量、次数等间断且非负的数据。
        所以很有必要在计算机上实现自然数类型，计算机可以更好地处理和存储自然数数据。
    </p>
    <h2>计算机的基本无符号整数类型也能表达间断、非负的数据，为什么还需要自然数类型？</h2>
    <p>
        这是因为计算机的基本无符号整数类型（如
        <var>unsigned int</var>、<var>unsigned long</var>、<var>unsigned short</var>
        ）虽然也能表达间断、非负的数据，
        但是计算机的基本整数类型并不能完整表达自然数的概念。
        因为自然数类型的范围是无限的，而计算机的整数类型只能表示有限的范围。
        例如，<var>unsigned int</var>类型只能表示<var>0</var>到<var>4294967295</var>之间的整数，
        这就限制了计算机处理自然数的能力。
        所以，在计算机上还需要实现自然数类型，以便更好地处理和存储自然数数据。
    </p>
    <h2>怎么实现自然数类型？</h2>
    <div>
        <h3>1.如何实现自然数无限的特性？真的能实现无限的特性吗？</h3>
        <p>
            其实并不能在计算机上实现无限的自然数。
            计算机的存储器能够存储数据的大小有限，显然是不能的，
            但是我们可以想办法将自然数的范围尽可能地拉高。
            例如，我们可以让自然数类型的结构变为指针，
            指针指向内存块，内存块中存储着自然数。
            如果我们将内存块的范围设置为整个内存的字节数，那样就能最大化地实现自然数的范围。
            这种范围达到了计算机的极限，所以并不能真正实现无限的自然数，
            但是可以达到计算机可以表达的最大范围，也就可以近似为无限。
        </p>
        <h3>2.存储自然数的内存块的值是什么意思？</h3>
        <p>
            我们可以拿<var>unsigned long</var>类型来举例。
            <var>unsigned long</var>可以表达的范围是<var>0</var>到<var>4294967295</var>，
            因为它有4个字节，字节又有8位（256个值），
            所以<var>unsigned long</var>可以表达的值的数量是<var>256<sup>4</sup></var>。
            到了自然数的内存块也一样，
            我们可以让内存块的长度为<var>m</var>字节，
            这样它的大小就是<var>256<sup>m</sup></var>，范围是<var>0</var>到<var>256<sup>m</sup> - 1</var>。
        </p>
        <h3>3.但是并没有那么容易就能让内存块的范围达到整个内存的字节数，这会带来哪些问题？</h3>
        <p>
            内存分配器绝对不会分配整个内存，所以并不会真正达到整个内存的字节数。
            另外，内存分配器分配的内存块大小也会受到很多因素的影响，
            例如，操作系统的内存管理策略、虚拟内存的使用、程序的运行时间等等。
            所以，即使我们能将内存块的范围设置为整个内存的字节数，
            也不能保证计算机的内存分配器分配的内存块大小是我们想要的。
            所以，即使我们实现了自然数的无限特性，
            也不能保证计算机的内存分配器分配的内存块大小是我们想要的。
        </p>
        <h3>4.如何解决这个问题？</h3>
        <p>
            解决这个问题的方法很简单，我们可以让内存分配器分配的内存块大小尽可能地小。
            如果这个内存块的数值超出了这个内存块能表示的范围而导致了进位，
            我们可以重新分配内存块，分配更大的内存块，直到这个数值不再超出范围。
        </p>
        <h3>5.更好的方法是什么？</h3>
        <p>
            其实每个内存块都有一个属性，就是自己的大小，也就是长度。
            如果我们将一个长度为<var>m</var>的全部为<var>0</var>的内存块的值
            与另一个长度为<var>n</var>的全部为<var>0</var>的内存块的值比较，
            就会发现完全相等，这说明两种不同的内存块可以表示相同的值。
            如果我们能让两种不同的内存块的值不相同，那么就会扩展自然数的范围。
        </p>
        <h3>6.更先进的概念</h3>
        <p>
            根据第五点，我们可以扩展自然数的范围。
            我们可以尝试创建一个数轴，数轴的每个点都是一个自然数。
            <ul>
                <li>如果一个自然数的内存块的大小为0字节，那么范围就是<var>0</var>；</li>
                <li>如果一个自然数的内存块的大小为1字节，那么范围就是<var>0</var>到<var>255</var>；</li>
                <li>如果一个自然数的内存块的大小为2字节，那么范围就是<var>0</var>到<var>65535</var>；</li>
            </ul>
            以此类推，直到一个自然数的内存块的大小为<var>m</var>字节，
            我们可以发现不同的内存块的表示范围有重叠，
            如果两个内存块大小不同但值相同，就会导致重叠，
            如果我们将这些范围视为一个个集合，那么经过并集运算后，就会得到<var>0</var>到<var>256<sup>m</sup> - 1</var>的范围。
            但是如果我们按照以下步骤进行：
            <ul>
                <li>如果一个自然数的内存块的大小为0字节，那么范围就是<var>0</var>；</li>
                <li>如果一个自然数的内存块的大小为1字节，那么范围就是<var>1</var>到<var>256</var>；</li>
                <li>如果一个自然数的内存块的大小为2字节，那么范围就是<var>257</var>到<var>65792</var>；</li>
            </ul>
            以此类推，直到一个自然数的内存块的大小为<var>m</var>字节，
            那么我们就得到了<var>
                ∑<sub><var>k</var> = 0</sub><sup><var>m</var> - 1</sup>256<sup><var>k</var></sup>
                （m为0时为0）
            </var>到<var>
                ∑<sub><var>k</var> = 0</sub><sup><var>m</var></sup>256<sup><var>k</var></sup>
            </var>的范围。
            如果我们将这些范围视为一个个集合，那么经过并集运算后，就会得到<var>0</var>到<var>
                ∑<sub><var>k</var> = 0</sub><sup><var>m</var></sup>256<sup><var>k</var></sup>
            </var>的范围。
            我们发现结果不仅包含了连贯的自然数范围，还进行了一一对应，相较于之前的表达范围更加广泛。
            这样子我们就能表示无限的自然数了。
        </p>
    </div>
    <h2>例子</h2>
    <p>
        以下是一些例子，表示了不同的自然数对应的内存块的内容。
        <ul>
            <li>0:</li>
            <li>1:00</li>
            <li>2:01</li>
            <li>...</li>
            <li>256:ff</li>
            <li>257:00 00</li>
            <li>258:01 00</li>
            <li>...</li>
            <li>65792:ff ff</li>
            <li>65793:00 00 00</li>
            <li>65794:01 00 00</li>
            <li>...</li>
        </ul>
    </p>
</body>
</html>